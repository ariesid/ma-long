nohup: ignoring input
16:57:15 | INFO     | Trading bot initialized successfully
16:57:15 | INFO     | Bot started with config: {'api_key': 'd06d313750be881178426e1197cbd9b2', 'secret_key': '52598af3c02c5ba9f8ca81acfbd3f968b38067b192964b05cd41afeed72f2522', 'use_testnet': True, 'account': 'spot', 'trading_pair': 'SOL_USDT', 'timeframe': '1H', 'ema_short': 12, 'ema_long': 26, 'rsi_length': 14, 'rsi_min': 40.0, 'rsi_max': 70.0, 'adx_period': 14, 'adx_threshold': 25.0, 'atr_period': 14, 'max_usdt_per_trade': 50.0, 'entry_1_percent': 30.0, 'entry_2_percent': 70.0, 'sl_atr_multiplier': 2.5, 'trailing_atr_multiplier': 2.0, 'tp1_rr': 1.0, 'tp1_percent': 30.0, 'tp2_rr': 2.0, 'tp2_percent': 50.0, 'max_candles_hold': 18, 'dry_run': False, 'log_level': 'INFO', 'use_volume_filter': True, 'volume_ma_period': 20}
16:57:16 | INFO     | BALANCE | USDT | Available: 2294.9421 | Frozen: 0.0000
17:57:16 | INFO     | BALANCE | USDT | Available: 2294.9421 | Frozen: 0.0000
18:57:17 | INFO     | BALANCE | USDT | Available: 2294.9421 | Frozen: 0.0000
19:57:18 | INFO     | BALANCE | USDT | Available: 2294.9421 | Frozen: 0.0000
20:57:18 | INFO     | BALANCE | USDT | Available: 2294.9421 | Frozen: 0.0000
20:57:19 | INFO     | SIGNAL | SOL_USDT | LONG ENTRY | {'price': np.float64(138.83), 'ema_short': np.float64(138.67914884005648), 'ema_long': np.float64(138.31028022970298), 'rsi': np.float64(51.657006471778054), 'adx': np.float64(47.979570958446054), 'atr': np.float64(1.6783103121106708), 'volume': np.float64(1171.685), 'volume_ma': np.float64(1101.91025), 'ema_aligned': np.True_, 'rsi_valid': np.True_, 'adx_valid': np.True_, 'volume_valid': np.True_, 'signal': np.True_, 'entry_1': {'price': np.float64(138.67914884005648), 'position_size': np.float64(0.10804581142404378), 'stop_loss': np.float64(134.1145044494263), 'take_profit': np.float64(143.24379323068666), 'risk_reward': 1.0}, 'entry_2': {'price': np.float64(138.31028022970298), 'position_size': np.float64(0.2521068933227688), 'stop_loss': np.float64(134.1145044494263), 'take_profit': np.float64(146.70183179025634), 'risk_reward': 2.0}, 'reason': 'All entry conditions met', 'entry_status': 'âš  Near entry zone (slight premium)', 'live_price': 138.76, 'last_candle_price': np.float64(138.83), 'price_change_pct': np.float64(-0.050421378664569326)}
20:57:19 | INFO     | ENTRY | SOL_USDT | LONG | Price: 138.4209 | Size: 0.360153 | SL: 134.1145 | TP1: 145.6644 | TP2: 0.0000
21:57:20 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
21:57:20 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
22:57:20 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
23:57:21 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
00:57:21 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
01:57:22 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
01:57:22 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
02:57:23 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
02:57:23 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
03:57:23 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
03:57:23 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
04:57:24 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
04:57:24 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
05:57:24 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
05:57:24 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
06:57:25 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
06:57:25 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
07:57:26 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
07:57:26 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
08:57:26 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
08:57:26 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
09:57:27 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
09:57:27 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
10:57:28 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
10:57:28 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
11:57:28 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
11:57:28 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
12:57:29 | INFO     | BALANCE | USDT | Available: 2245.1117 | Frozen: 0.0000
12:57:29 | ERROR    | EXCEPTION | close_position | 'risk_amount'
Traceback (most recent call last):
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/gate_ma_main.py", line 541, in close_position
    pnl_info = self.risk_manager.calculate_pnl(self.current_position, exit_price)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/hd/DataScienceProject/gate-grid-trading/ma-long/risk_manager.py", line 332, in calculate_pnl
    pnl_percent = (pnl / position["risk_amount"]) * 100 if position["risk_amount"] > 0 else 0
                                                           ~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'risk_amount'
